repos:
  - repo: local
    hooks:
      - id: black
        name: black (formatting)
        language: system
        entry: black --check --quiet
        types: [python]

      - id: isort
        name: isort (import sorting)
        language: system
        entry: isort --check-only
        types: [python]

      - id: flake8
        name: flake8 (linting)
        language: system
        entry: flake8
        types: [python]

      - id: mypy
        name: mypy (type checking)
        language: system
        entry: mypy --cache-dir /dev/null
        types: [python]
        pass_filenames: false
        args: [orchard/]

      - id: bandit
        name: bandit (security scan)
        language: system
        entry: bandit -c pyproject.toml -r
        types: [python]

      - id: no-env-files
        name: block .env files
        language: fail
        entry: ".env files must not be committed"
        files: '\.env($|\.)'

      - id: nbstripout
        name: strip notebook outputs
        language: system
        entry: python scripts/strip_notebook_outputs.py
        types: [jupyter]

      - id: git-cliff
        name: generate changelog
        language: system
        entry: bash scripts/update-changelog.sh
        stages: [pre-commit]
        always_run: true
        pass_filenames: false
